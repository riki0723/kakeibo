<div class="main-header">
 
  <div class="left-header">
      <div class="main-header-title">
        <div class="show-lists" id="pull-down-top">top</div>
      </div>
  </div>

  <div class="right-header">
    <% if user_signed_in? %>
        <div class="user_nav grid-6">
          <li><%= link_to current_user.nickname, "/users/#{current_user.id}", class: "user-nickname" %></li>
          <li><%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: "logout" %></li>
       </div>
    <% else %>
        <div class="grid-6">
         <li><%= link_to 'ログイン', new_user_session_path, class: "login" %></li>
         <li><%= link_to '新規登録', new_user_registration_path, class: "sign-up" %></li>
       </div>
    <% end %>
  </div>

</div>

<div class="top-screen">

  <div class="top-top" id="show-top-top">
    <div class="top-info">
    <h1>アプリ説明</h1>
      <div class="info">給料日前とかに、気付いたらお金がない……そんな事ありませんか？</div>
      <div class="info">そんな時に、自分がどのくらい出費しているかを確認できるアプリです！出費を登録して自分の出費を確認しましょう！</div>
    <h1>機能について</h1>
      <h2>カレンダー</h2>
        <div class="info">カレンダーで日付事の出費を確認できます</div>
      <h2>出費履歴</h2>
        <div class="info">日付の絞り込みなどにより出費の履歴を確認できます</div>
    </div>
  </div>

  <div class="top-calender hidden" id="show-top-calender">
       <%= month_calendar events: @expenses do |date, expenses| %>
          <%= date.day %>
  
           <% if current_user.expenses.where(start_time: date).sum(:price) > 0%>

            <div>支出額は
               <%= current_user.expenses.where(start_time: date).sum(:price) %>円です
            </div>

           <% end %>
 
        <% end %>
   </div>


  <div class="top-list hidden" id="show-top-list">
    <div class="top-list-all">
      <div class="search_list">
        <%= search_form_for @q do |f| %>
        <div class="search_keyworrd">
           <%= f.label :name, "Keyword" %>
           <%= f.search_field :name_cont %>
        </div>
        <div class="search_date">
            <%= f.label :start_time,"日付" %>
            <%= f.date_select :start_time_gteq %>日〜
            <%= f.date_select :start_time_lt %>日
        </div>
        <div class="seach" id="seach">
            <%= f.submit "検索" %>
            <%=link_to 'リセット', root_path, class:"back-btn" %>
        </div>
      </div>

      <table class="top-list-table">
          <thead>
              <tr>
                 <th>詳細</th>
                 <th><%= sort_link(@q, :start_time, "日付") %></th>
                 <th><%= sort_link(@q, :name, "名前") %></th>
                 <th>金額</th>
                 <th>購入場所</th>
                 <th>カテゴリー</th>
                 <th>支払い方法</th>
               </tr>
           </thead>

          <tbody>
          <% @expenses.each do |expense| %>
            <tr>
              <td><%= link_to "詳細", expense_path(expense.id), class: "post" %></td>
              <td><%= expense.start_time.strftime("%m/%d") %></td>
              <td><%= expense.name %></td>
              <td>¥<%= expense.price %></td>
              <td><%= expense.wheretobuy %></td>
              <td><%= expense.category.name %></td>
              <td><%= expense.payment.name %></td>
             </tr>
             <% end %>
          <% end %>
           
          </tbody>
      </table>
      <%= paginate @expenses %> 
    </div>

  </div>


</div>