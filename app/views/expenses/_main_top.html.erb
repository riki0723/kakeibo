<div class="main-header">
 
  <div class="left-header">
     <div class="main-header-title">
        <div class="show-lists" id="pull-down-top">top</div>
        <div class="show-lists hidden" id="pull-down-calendar">カレンダー</div>
        <div class="show-lists hidden" id="pull-down-rireki">出費履歴</div>

      </div>
  </div>

  <div class="right-header">
    <% if user_signed_in? %>
        <div class="user_nav grid-6">
          <li><%= link_to current_user.nickname, "/users/#{current_user.id}", class: "user-nickname" %></li>
          <li><%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: "logout" %></li>
       </div>
    <% else %>
        <div class="grid-6">
         <li><%= link_to 'ログイン', new_user_session_path, class: "login" %></li>
         <li><%= link_to '新規登録', new_user_registration_path, class: "sign-up" %></li>
       </div>
    <% end %>
  </div>

</div>

<div class="top-screen">

  <div class="top-top" id="show-top-top">
    <h1>トップページ</h1>
      <div>出費を管理するアプリです</div>
  </div>

  <div class="top-calender hidden" id="show-top-calender">
       <%= month_calendar events: @expenses do |date, expenses| %>
          <%= date.day %>
  
           <% if Expense.where(start_time: date).sum(:price) > 0%>

            <div>支出額は
               <%= Expense.where(start_time: date).sum(:price) %>円です
            </div>

           <% end %>
 
        <% end %>
   </div>


  <div class="top-list hidden" id="show-top-list">

      <%= search_form_for @q do |f| %>
      <%= f.label :name, "Keyword" %>
       <%= f.search_field :name_cont %>

       <%= f.label :start_time %>
      <%= f.date_select :start_time_gteq %>
      <%= f.date_select :start_time_lt %>



        <%= f.submit "検索" %>


      <table class="top-list-table">
          <thead>
              <tr>
                 <th>詳細</th>
                 <th>日付</th>
                 <th>名前</th>
                 <th>金額</th>
                 <th>購入場所</th>
                 <th>カテゴリー</th>
                 <th>支払い方法</th>
               </tr>
           </thead>

          <tbody>
          <% @expenses.each do |expense| %>
            <tr>
              <td><%= link_to "詳細", expense_path(expense.id), class: "post" %></td>
              <td><%= expense.start_time.strftime("%m/%d") %></td>
              <td><%= expense.name %></td>
              <td>¥<%= expense.price %></td>
              <td><%= expense.wheretobuy %></td>
              <td><%= expense.category.name %></td>
              <td><%= expense.payment.name %></td>
             </tr>
             <% end %>
          <% end %>
           
          </tbody>
      </table>
      <%= paginate @expenses %> 
      <%=link_to 'リセット', root_path, class:"back-btn" %>

  </div>


</div>